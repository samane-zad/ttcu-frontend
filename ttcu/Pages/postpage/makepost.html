<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ایجاد پست</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,700">
    <link rel="stylesheet" href="/ttcu/src/css/main.css">
    <link rel="stylesheet" href="/ttcu/src/select-option.css">
    <link rel="stylesheet" href="/ttcu/src/css/mainstyle.css">
   <link rel="stylesheet" href="/ttcu/public/darkmode/moon.css">
   <link rel="stylesheet" href="/ttcu/src/footer.css">
   <link rel="stylesheet" href="/ttcu/src/font/font.css">
   <link rel="stylesheet" href="makepost.css">
   <link rel=icon href="../../src/Logo/ttcu-icon.ico">
   <link rel="stylesheet" href="/ttcu/src/css/scroll.css">

  </head>
<body>

  <div class="scroll-button">  </div>

  <div class="grid-header">
    <div>
        <div class="header-dark">
            <div class="header" id="myHeader">  
                          <nav class="navbar navbar-dark navbar-expand-md navigation-clean-search">
                <div class="container"><img src="/ttcu/public/Icon.png"><a class="navbar-brand" href="#">TTCU </a>
                    
                
                    <button class="navbar-toggler" data-toggle="collapse" data-target="#navcol-1">
                        <span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navcol-1">


                        <ul class="nav navbar-nav">
                            <li class="nav-item" role="presentation">  
                                <div class="moon" onclick="myFunction()" class= dark-mode ></div></li>

                            
        
                                <li class="nav-item" role="presentation"><a class="nav-link" href="/ttcu/Pages/user/html/index/index.html">خانه</a></li>
                                <li class="nav-item" role="presentation"><a class="nav-link" href="/ttcu/Pages/about/about.html">درباره ما</a></li>
    
                                <li class="nav-item" role="presentation"><a class="nav-link" href="/ttcu/Pages/blog/blogpage.html">بلاگ</a></li>
                                <li class="nav-item" role="presentation"><a class="nav-link" href="/ttcu/Pages/contact-us/contact.html">تماس باما</a></li>

                                <li class="dropdown"><a class="dropdown-toggle nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" >مشاهده پست ها </a>
                                  <div class="dropdown-menu" role="menu"><a class="dropdown-item" role="presentation" href="/ttcu/Pages/postpage/bestPost.html">منتخب برای شما</a>
                                    <a class="dropdown-item" role="presentation" href="/ttcu/Pages/postpage/showpost.html">جستجوی پست</a>
                                  </div>
                                </li>
                                                           

                            </li>
                        </ul>





                        <form class="form-inline mr-auto" target="_self">  </form>
                          
                        <span class="navbar-text">
                            <a href="../userinfo/userinfo.html" ><img src="../../src/img/per.PNG"></a>
</span>

                          
                 
            </nav>
        </div>
    </div>
</div>
</div>
  <!----->
  <div class="form-container" >
    <form action="#" class="form" method="POST" id="form" autocomplete="off">
      <h2>پست جدید</h2>
      <hr>
      <div class="notistxt">
      <p>برای ایجاد پست جدید پُر کردن همه فیلدها الزامی است <em style="color: rgb(233, 17, 17); ">*</em></p> </div>




      <div class="form-box">
        <div class="form-control">
          <input id="title" type="text" placeholder="عنوان"/>
          <small>Error</small>
        </div></div>
        
      
        <div class="form-box">
          <div class="form-control">
          <input type="text" id="contact"  placeholder="لطفاایمیل معتبر وارد کنیدبرای مثال:example@example.com">
          <small>Error</small>
        </div></div>
      




        <div class="form-box" style="text-align: right; direction: rtl;"></div>
     
       
            <div class="form-control">
            <select id=uni dir="rtl" class="client-info">
                <option value="" disabled="disabled" selected="selected">دانشگاه خود را انتخاب کنید</option>
                <option value="SHARIATY_TECHNICAL_COLLEGE">دانشکده فنی دکتر شریعتی</option>
                <option value="VALIASR_TECHNICAL_COLLEGE"> دانشکده فنی ولیعصر</option>
                <option value="ENGHELAB_TECHNICAL_COLLEGE">دانشکده فنی انقلاب اسلامی</option>
                <option value="SHAMSIPOUR_TECHNICAL_COLLEGE">دانشکده فنی شمسی پور</option>
            </select>
         
            <small>Error</small>
  </div>


      
                


       
 
  <div class="form-box" >

    <div class="form-control">
    <select id="major"  dir="rtl" class="client-info" >
        <option value="" disabled="disabled" selected="selected">رشته خود را انتخاب کنید</option>
        <option value="SOFTWARE">نرم افزار</option>
        <option value="ELECTRONICS">الکترونیک</option>
        <option value="MECHANICS">مکانیک</option>
        <option value="ICT">ICT</option>
       <option value="ARCHITECTURE">نقشه کشی معماری</option>   
       <option value="GRAPHICS">گرافیک</option>
       <option value="ACCOUNTING">حسابداری</option>
       <option value="CLOTHING_DESIGN">طراحی دوخت</option>
       <option value="PHYSICAL_EDUCATION">تربیت بدنی</option>
       <option value="IT">IT</option>
      </select>
    <small>Error</small>
  </div>
</div>

         




<div style="background-color: transparent;  border-color: transparent; padding: 0.5rem ;  display: flex;flex-direction: column;">            
            <label class="select" for="postType" id="typeLabel" >
              
              <!-- <select id="postType" name="postTypes" dir="rtl" >
                <option value="" disabled="disabled" selected="selected">پست را انتخاب کنید</option>
                <option value="INVITATION">فراخوان</option>
                <option value="BEST_PROJECTS">بهترین پایان نامه ها</option>
                <option value="NEWS">اخبار دانشگاهی</option>
                <option value="TOP_ENTRIES">رتبه های برتر کنکور</option>
               <option value="MASTERS_NOTES">جزوات اساتید</option>   
               <option value="ENTRANCE_EXAM_GUIDANCE">راهنمای کنکور کاردانی به کارشناسی</option>
               <option value="STUDENT_SERVICES">خدمات دانشجویی</option>
               </select> -->
       
            </label>
            <small style="direction:rtl;text-align: right; visibility: hidden;">Error</small>
            
           
          
   </div>

     


        <div class="form-box"  style="text-align: right; direction: rtl;"> 
          <textarea name="content"  rows="10" cols="10" placeholder="توضیحات" id="description" ></textarea>
          <small>Error</small>
        </div>


        <div class="form-button">
          <button type="submit" id="submit" class="submit" onclick="uploadPost()" >ارسال</button>
        </div>
    </form>
</div>


<footer class="footer">
  <div class="footer-left col-md-4 col-sm-6">
    <p class="about" dir="rtl" style="text-align: right;">
      <a href="../../Pages/about/about.html"><span> درباره ما</span> </a>
      در این صفحه شرح داده می شود که سایت آن ها چه طور به مخاطبان کمک می کند و چطور به سؤالات آن ها پاسخ می دهد:
       «ما عمیقاً برای سؤالات شما ارزش قائلیم و سعی می کنیم به بهترین شکل ممکن به سؤالات شما پاسخ دهیم.» 
      بعد از آن توضیح داده شده است که چطور به سؤالات مخاطبان پاسخ داده می شود، مثلاً به مخاطبان قول داده
       است که در کمتر از ۱۲ ساعت یک جواب کوتاه دریافت کنند. همچنین این صفحه شامل یک اطلاعات تماس ساده و واضح، 
      دکمه های مربوط به لینک شبکه های اجتماعی، لینک های پیشنهادی و حتی یک لیست از مطالب اخیر بلاگ سایت است.

    </p>
    <div class="icons">
      <a href="#"><i class="fa fa-facebook"></i></a>
      <a href="#"><i class="fa fa-twitter"></i></a>
      <a href="#"><i class="fa fa-linkedin"></i></a>
      <a href="#"><i class="fa fa-google-plus"></i></a>
      <a href="#"><i class="fa fa-instagram"></i></a>
    </div>
  </div>
  <div class="footer-center col-md-4 col-sm-6">
    <div>
      <i class="fa fa-map-marker"></i>
      <p><span> Street name and number</span> تهران , ایران</p>
    </div>
    <div>
      <i class="fa fa-phone"></i>
      <p> (+98) 21 22 44 70 53</p>
    </div>
    <div>
      <i class="fa fa-envelope"></i>
      <p><a href="#"> office@ttcu.com</a></p>
    </div>
  </div>
  <div class="footer-right col-md-4 col-sm-6">
    <h2> TTCU<span> <img src="../../public/Icon.png"></span></h2>
    <p class="menu">
      <a href="../../public/index.html"> خانه</a> |
      <a href="../about/about.html"> درباره ما</a> |
      <a href="../guidepage/guide.html"> راهنما</a> |
      <a href="../contact-us/contact.html"> تماس با ما</a>
    </p>
    <p class="name"> SamFa &copy; 2021</p>
  </div>
</footer>
<!---->


<script>
    
  function uploadPost(){
  var detailArr={};

  var uniMajor={};
  uniMajor["uni"]=document.getElementById("uni").value;
  uniMajor["major"]=document.getElementById("major").value;

  detailArr["postType"]=document.getElementById("postType").value;
  detailArr["title"]=document.getElementById("title").value;
  detailArr["description"]=document.getElementById("description").value;
  detailArr["contact"]=document.getElementById("contact").value;
  detailArr["uniMajor"]=uniMajor;


 var detailArrstr=JSON.stringify(detailArr);
 console.log(detailArrstr);
  var xmlhttp;
  if(window.XMLHttpRequest){
   xmlhttp=new XMLHttpRequest;
  }
  else{
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=respond;
function respond (){

  if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
    
    var resonse = JSON.parse(this.responseText);
      if(resonse.code == 200){
        
       
        window.location='../user/html/index/index.html';
      }else {
        window.location = 'welcome.html';

      }

  }

  else{
    console.log("Hello");

  }

}


xmlhttp.open('POST','http://127.0.0.1:8082/api/uploadPost',true);
xmlhttp.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
xmlhttp.setRequestHeader('Authorization',window.localStorage.getItem("Token"));

xmlhttp.send(detailArrstr);
}

</script>

<script>
  loadUserInfo();
      function loadUserInfo(){
      var detailArr={};
      var xmlhttp;
      if(window.XMLHttpRequest){
       xmlhttp=new XMLHttpRequest;
      }
      else{
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=respond;
      function respond (){
      console.log(xmlhttp.readyState);
      console.log(xmlhttp.status);
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
        
        var response = JSON.parse(this.responseText);
          if(response.code == 200){
              console.log(response);
              var info = response.object;
              let userType =info.userType;
              let text="";
              if(userType=='STUDENT')
              {
                  text="<div id='form-control'>"+
                  "<select id='postType'  name='postTypes' dir='rtl' >"+
                "<option value='' disabled='disabled' selected='selected'>پست را انتخاب کنید</option>"+
                "<option value='MASTERS_NOTES'>جزوات اساتید</option>"+   
                "<option value='ENTRANCE_EXAM_GUIDANCE'>راهنمای کنکور کاردانی به کارشناسی</option>"+
                "<option value='STUDENT_SERVICES'>خدمات دانشجویی</option>"+
                "</select>"+
                "<small>Error</small>"+
                "</div>"
  
              }else
              {
                text=
 "<div class='form-control' style='  background-color: transparent; border-color: transparent;  padding: 2.5rem ;  display: flex;  flex-direction: column;'>"+               

                "<select id='postType'  name='postTypes' dir='rtl' >"+
                "<option value='INVITATION'>فراخوان</option>"+
                "<option value='BEST_PROJECTS'>بهترین پایان نامه ها</option>"+
                "<option value='NEWS'>اخبار دانشگاهی</option>"+
			        	"<option value='TOP_ENTRIES'>رتبه های برتر کنکور</option>"+
                "<option value='MASTERS_NOTES'>جزوات اساتید</option>"+   
                "<option value='ENTRANCE_EXAM_GUIDANCE'>راهنمای کنکور کاردانی به کارشناسی</option>"+
                "<option value='STUDENT_SERVICES'>خدمات دانشجویی</option>"+
                "</select>"+
                "<small>Error</small>"+
                "</div>"
              }
              document.getElementById("typeLabel").innerHTML = text;
   
              
          
           
          }else {
            window.location = 'welcome.html';
      
          }
          }
      
      else{
        console.log("Hello");
      
      }
      
      }
      
      
      xmlhttp.open('GET','http://127.0.0.1:8082/api/getUserInfo',true);
      xmlhttp.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
      xmlhttp.setRequestHeader('Authorization',window.localStorage.getItem("Token"));
      
      xmlhttp.send(JSON.stringify(detailArr));
      }
      
      </script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/ttcu/public/darkmode/darkmod.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>







	<script>
		ClassicEditor
            .create( document.querySelector( '#editor' ) )
            .catch( error => {
                console.error( error );
            } );
	</script>




<script src="/ttcu/src/app/makepost-validation.js"></script> 
<script src="/ttcu/src/app/scroll.js"></script>

</body>
</html>